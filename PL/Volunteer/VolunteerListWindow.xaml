<Window x:Class="PL.Volunteer.VolunteerListWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PL.Volunteer"
        mc:Ignorable="d"
        Title="VolunteerListWindow" Height="640" Width="800"
        DataContext="{Binding RelativeSource={RelativeSource Mode=Self}}"
        Loaded="Window_Loaded"
        Closed="Window_Closed"
        FlowDirection="RightToLeft">
    <!--External Grid-->
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="40*"/>
            <RowDefinition Height="500*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid HorizontalAlignment="Stretch" Height="auto" Grid.Row="0" VerticalAlignment="Stretch" Width="auto">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <StackPanel Grid.Column="0" >
                <Label Content="סנן לפי סוג קריאה:"/>
                <ComboBox SelectedValue="{Binding CallType, Mode=TwoWay}"
                      ItemsSource="{Binding Source= {StaticResource CallTypeCollectionKey}}"
                      SelectionChanged="filterBySelect_SelectionChanged"
                       HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                </ComboBox>
            </StackPanel>
            <StackPanel Grid.Column="1">
                <Label  Content="מיין לפי:"/>
                <ComboBox SelectedValue="{Binding Attribute, Mode=TwoWay}"
           ItemsSource="{Binding Source= {StaticResource VolunteerInListAttributesCollectionKey}}"
           SelectionChanged="filterBySelect_SelectionChanged"
            HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                </ComboBox>
            </StackPanel>
        </Grid>
        <DataGrid Grid.Row="1" ItemsSource="{Binding Path=VolunteerList}" IsReadOnly ="True" AutoGenerateColumns="False"
         EnableRowVirtualization="True" RowDetailsVisibilityMode="VisibleWhenSelected"
         MouseDoubleClick="volunteersList_MouseDoubleClick" SelectedItem="{Binding SelectedVolunteer}">
            <DataGrid.Columns>
                <DataGridTemplateColumn Header="Delete" Width="Auto">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate >
                            <Button Content="🚮" Click="delete_btnClick " />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTextColumn Binding="{Binding Id}" Header="Id" Width="Auto"/>
                <DataGridTextColumn Binding="{Binding Name}" Header="Name" Width="Auto"/>
                <DataGridTemplateColumn Header="Is Active" Width="Auto">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <CheckBox IsEnabled="False" IsChecked="{Binding Active}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTextColumn Binding="{Binding TotalCallsHandledByVolunteer}" Header="Total Calls Handled By Volunteer" Width="Auto"/>
                <DataGridTextColumn Binding="{Binding TotalCallsCanceledByVolunteer}" Header="Total Calls Canceled By Volunteer" Width="Auto"/>
                <DataGridTextColumn Binding="{Binding TotalExpiredCallingsByVolunteer}" Header="Total Expired Callings By Volunteer" Width="Auto"/>
                <DataGridTextColumn Binding="{Binding IDCallInHisCare}" Header="ID Call In His Care" Width="Auto"/>
                <DataGridTextColumn Binding="{Binding CallType}" Header="Call Type" Width="Auto"/>

            </DataGrid.Columns>
        </DataGrid>
    
        <Button Grid.Row="2" HorizontalAlignment="Center" Height="60" Width="120"
        Content="הוסף" Foreground="White" FontWeight="Bold" FontSize="16" Click="Button_Click">
            <Button.Template>
                <ControlTemplate TargetType="Button">
                    <Grid>
                        <Ellipse x:Name="ellipse" Fill="#007ACC" Stroke="Black" StrokeThickness="2"/>
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"
                                  Content="{TemplateBinding Content}" 
                                  TextElement.Foreground="{TemplateBinding Foreground}"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                      
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="ellipse" Property="Fill" Value="Aqua"/>
                        </Trigger>

                        
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="ellipse" Property="Fill" Value="LightBlue"/>
                        </Trigger>

                        <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                            <BeginStoryboard>
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="ellipse"
                                            Storyboard.TargetProperty="Fill.Color"
                                            To="Gold" Duration="0:0:1"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Button.Template>
        </Button>


    </Grid>
</Window>